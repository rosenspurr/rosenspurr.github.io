--- layout: default ---

<h1>{{ page.title | capitalize }}</h1>

<div class="gallery">
    {% assign all_items = "" | split: "" %} {% comment %} `page.title` will be
    the category name (from jekyll-archives) {% endcomment %} {% assign
    category_name = page.title | downcase %} {% assign posts_to_show =
    site.posts | where_exp: "post", "post.categories contains category_name" %}
    {% for post in posts_to_show %} {% if post.images %} {% for img in
    post.images %} {% assign item_info = img | append: "|" | append: post.url |
    append: "#img-" | append: forloop.index %} {% assign all_items = all_items |
    push: item_info %} {% endfor %} {% endif %} {% endfor %} {% assign
    shuffled_items = all_items | sample: all_items.size %} {% for item in
    shuffled_items %} {% assign parts = item | split: "|" %} {% assign src =
    parts[0] %} {% assign anchor_url = parts[1] %}

    <a href="{{ anchor_url }}">
        {% if src contains ".mp4" or src contains ".webm" %}
        <video
            src="{{ src }}"
            controls
            loop
            autoplay
            muted
            playsinline
            style="
                width: 100%;
                height: auto;
                display: block;
                margin-bottom: 6px;
            "
        >
            Your browser does not support the video tag.
        </video>
        {% else %}
        <img src="{{ src }}" alt="" />
        {% endif %}
    </a>
    {% endfor %}
</div>
